{% extends 'index.html' %}


<!--<!doctype html>-->
<!--<html lang="en">-->
<!--{% load staticfiles %}-->

{% block active_blog %}
    <ul class="nav navbar-nav menu_nav ml-auto">
        <li class="nav-item "><a class="nav-link" href="{% url 'home' %}">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'show_notice' %}">Notice</a></li>
{#                            {% endif %}#}
        {% if user.is_authenticated %}
        <li class="nav-item active"><a class="nav-link" href="{% url 'online_advice' %}">Online Advice </a></li>
        {% endif %}
        <li class="nav-item"><a class="nav-link" href="https://www.du.ac.bd/">Dhaka University</a></li>
        <li class="nav-item "><a class="nav-link" href="{% url 'aboutPage' %}">About</a></li>
{#                            {% if user.username == "ludwigprandtl" %}#}
{#							<li class="nav-item"><a class="nav-link" href="{% url 'post_notice' %}">Post Notice</a></li>#}
{#                            {% else %}#}
        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact</a></li>

    </ul>
{% endblock %}

{% block only_header %}
{% load crispy_forms_tags %}


  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" rel="stylesheet">

<!--      for modal-->
  </head>

  <style>
      h6 {
  color: black;
}

    .center {
        /* this will keep the content center */
        position: absolute;
        right: 0;
        left: 0;
        margin: auto;
    }

    .msg-group {
    	position: absolute;
        max-width: 720px;
        height: 92%;
        overflow-y: scroll;  /*if the content beyond width and height, use the scrollbar*/
    }

    .card {
        padding: 10px 0 10px 0;
        color: black;
    }

    .input-group {
    	position: absolute;
        height: 8%;
    	bottom: 0;
    }

    .btn {
        height:100%;
    }
    .header-shadow{
    background: -webkit-linear-gradient(90deg, #772dff 0%, #9e4fff 100%);
  background: -moz-linear-gradient(90deg, #772dff 0%, #9e4fff 100%);
  background: -ms-linear-gradient(90deg, #772dff 0%, #9e4fff 100%);
  background: -o-linear-gradient(90deg, #772dff 0%, #9e4fff 100%);
  background: linear-gradient(90deg, #772dff 0%, #9e4fff 100%); }
</style>

  <div class="header-shadow">
  <body>
  <br>
  <div class="row">
      <div class="col-lg-4">
           <form method="post" action="{% url 'new_message' %}" style="margin-left:15px">
            {% csrf_token %}
            <textarea id="input-box" rows ="5" cols="40" placeholder="Say something..." name="content" align = "left"></textarea>
               <div class="row">
                   <div class="col-lg-8"></div>
                   <div class="col-lg-2">
            <span></span><button class="btn btn-primary" type="submit" >send</button>
                   </div>
               </div>
        </form>
      </div>
    <div class="col-lg-4">
        {% for message in messages %}

        {% if message.author == user.username %}
        <div class="card">
             <div class="card-body">
                 <h6 class="card-subtitle mb-2 text-muted text-right">{{  message.author }}</h6>
                 <p class="card-text float-right">{{ message.content }}</p>
             </div>
        </div>
        {% else %}
        <div class="card">
             <div class="card-body">
                 <h6 class="card-subtitle mb-2 text-muted text-left">{{ message.author }}</h6>
                 <p class="card-text float-left">{{ message.content }}</p>
             </div>
        </div>

        {% endif %}
        <br>
        {% endfor %}
        </div>
{#  </div>#}
{#  <div class="row">#}
   <div class="col-lg-4">
{#        <form method="post" action="{% url 'new_message' %}" style="margin-left:15px">#}
{#            {% csrf_token %}#}
{#            <textarea id="input-box" rows ="5" cols="40" placeholder="Say something..." name="content" align = "left"></textarea>#}
{#            <span></span><button class="btn btn-primary" type="submit">send</button>#}
{#        </form>#}
      </div>
  </div>
    <br>
    <br>
    <br>
    <br>
    <br>



<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
{#    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>#}
{#    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>#}
{#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>#}
{#    <script type="text/javascript" async#}
{#      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">#}
{#    </script>#}
{##}
{#    <script>#}
{#        class chat_control {#}
{#            constructor() {#}
{#                this.msg_list = $('.msg-group');#}
{#            }#}
{##}
{#            send_msg(name, msg) {#}
{#                this.msg_list.append(this.get_msg_html(name, msg, 'right'));#}
{#                this.scroll_to_bottom();#}
{#            }#}
{##}
{#            receive_msg(name, msg) {#}
{#                this.msg_list.append(this.get_msg_html(name, msg, 'left'));#}
{#                this.scroll_to_bottom();#}
{#            }#}
{##}
{#            get_msg_html(name, msg, side) {#}
{#                var msg_temple = ''#}
{#                    <div class="card">#}
{#                         <div class="card-body">#}
{#                             <h6 class="card-subtitle mb-2 text-muted text-${side}">${name}</h6>#}
{#                             <p class="card-text float-${side}">${msg}</p>#}
{#                         </div>#}
{#                    </div>#}
{#                    `;#}
{#                return msg_temple;#}
{#            }#}
{##}
{#            scroll_to_bottom() {#}
{#                this.msg_list.scrollTop(this.msg_list[0].scrollHeight);#}
{#            }#}
{#        }#}
{##}
{##}
{#        var chat = new chat_control();#}
{#        chat.receive_msg('yingshaoxo', 'This was made for you! \`2017/(520*1314)\`');#}
{##}
{#        send_button = $('button') // get jquery element from html table name#}
{#        input_box = $('#input-box') // get jquery element from div id#}
{#        // also you could get it by $('.form-control') or $('textarea')#}
{##}
{#        function handle_msg(msg) {#}
{#            msg = msg.trim()#}
{#            msg = msg.replace(/(?:\r\n|\r|\n)/g, '<br>')#}
{#            return msg#}
{#        }#}
{##}
{#        function send_msg() {#}
{#            msg = handle_msg(input_box.val());#}
{#            if (msg != '') {#}
{#                chat.send_msg('you', msg);#}
{#                input_box.val('');#}
{##}
{#                setTimeout(function(){ chat.receive_msg('yingshaoxo', 'I can hear you.'); }, 1000);#}
{#                MathJax.Hub.Queue(["Typeset",MathJax.Hub]);#}
{#            }#}
{#        }#}
{##}
{#        function box_key_pressing() {#}
{#            // control + enter was pressed#}
{#            if ((event.keyCode === 10 || event.keyCode === 13) && event.ctrlKey) {#}
{#                send_msg();#}
{#            }#}
{#            // esc was pressed#}
{#            if (event.keyCode === 27) {#}
{#                input_box.blur();#}
{#            }#}
{#        }#}
{##}
{#        send_button.on('click', send_msg.bind());#}
{#        input_box.on('keyup', box_key_pressing.bind());#}
{#    </script>#}

  </body>
  </div>



{#</style>#}
</html>

{% endblock %}